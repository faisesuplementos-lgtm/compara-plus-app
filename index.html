<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compara+</title>

<style>
body { font-family: Arial; background:#f5f5f5; margin:0; padding:20px; text-align:center; }
input, button { padding:10px; font-size:16px; margin:5px; }
.card { background:#fff; padding:15px; margin:10px auto; max-width:400px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.card img { max-width:150px; }
.price { color:green; font-size:18px; font-weight:bold; }
</style>
</head>

<body>

<h1>Compara+</h1>

<input type="text" id="searchInput" placeholder="Buscar produto...">
<button onclick="search()">Buscar</button>

<div id="results"></div>

<script>
async function search() {
    const query = document.getElementById("searchInput").value;
    if (!query) return;

    document.getElementById("results").innerHTML = "Carregando...";

    try {
        const response = await fetch(`/api/buscar?q=${encodeURIComponent(query)}`);
        const data = await response.json();

        if (!response.ok) {
            document.getElementById("results").innerHTML = "Erro na busca.";
            return;
        }

        displayResults(data);

    } catch (error) {
        document.getElementById("results").innerHTML = "Erro de conexÃ£o.";
    }
}

function displayResults(products) {
    const container = document.getElementById("results");
    container.innerHTML = "";

    if (!products.length) {
        container.innerHTML = "Nenhum resultado encontrado.";
        return;
    }

    products.forEach(p => {
        container.innerHTML += `
            <div class="card">
                <img src="${p.thumbnail}">
                <h3>${p.title}</h3>
                <div class="price">R$ ${p.price}</div>
                <a href="${p.permalink}" target="_blank">
                    <button>Ver Produto</button>
                </a>
            </div>
        `;
    });
}
</script>

</body>
</html>





