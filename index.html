<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compara+</title>

<style>
body{font-family:Arial;background:#f5f5f5;margin:0}
header{background:#2563EB;color:#fff;padding:20px;text-align:center}
.container{padding:15px}
.search-box{display:flex;gap:10px}
input{flex:1;padding:10px;border-radius:8px;border:1px solid #ddd}
button{padding:10px 15px;border:none;border-radius:8px;cursor:pointer;font-weight:bold}
.search-btn{background:#2563EB;color:#fff}
.card{background:#fff;padding:12px;border-radius:12px;margin-top:12px;display:flex;gap:10px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
.card img{width:90px;height:90px;object-fit:contain}
.price{font-size:18px;font-weight:bold}
.cheapest{color:green}
.badge{background:green;color:#fff;font-size:10px;padding:4px;border-radius:6px;display:inline-block}
.ml-btn{background:#00a650;color:#fff;width:100%;margin-top:6px}
</style>
</head>

<body>

<header>
<h2>Compara+</h2>
</header>

<div class="container">
<div class="search-box">
<input id="searchInput" placeholder="Buscar produto...">
<button class="search-btn" onclick="buscar()">Buscar</button>
</div>

<div id="resultados"></div>
</div>

<script>

// âœ… SEU ID DE AFILIADO MERCADO LIVRE
const ML_ID = "df20251014105211";

async function buscar(){
  const query = document.getElementById("searchInput").value;
  if(!query) return;

  document.getElementById("resultados").innerHTML = "Buscando...";

  try{

    // Proxy pÃºblico para evitar CORS
    const proxy = "https://api.allorigins.win/get?url=";
    const api = encodeURIComponent(
      `https://api.mercadolibre.com/sites/MLB/search?q=${query}&limit=15`
    );

    const res = await fetch(proxy + api);
    const dataProxy = await res.json();
    const data = JSON.parse(dataProxy.contents);

    const produtos = data.results
      .map(item => ({
        title:item.title,
        price:item.price,
        thumbnail:item.thumbnail,
        url:item.permalink
      }))
      .sort((a,b)=>a.price-b.price);

    mostrar(produtos);

  }catch(e){
    document.getElementById("resultados").innerHTML = "Erro ao buscar.";
  }
}

function mostrar(produtos){
  const div = document.getElementById("resultados");
  div.innerHTML = "";

  produtos.forEach((p,index)=>{

    // ðŸ”¥ Link jÃ¡ com sua comissÃ£o
    const linkAfiliado = p.url + "?matt_tool=" + ML_ID;

    div.innerHTML += `
      <div class="card">
        <img src="${p.thumbnail}">
        <div>
          <div>${p.title}</div>
          <div class="price ${index==0?'cheapest':''}">
            R$ ${p.price.toFixed(2)}
          </div>
          ${index==0?'<div class="badge">MENOR PREÃ‡O</div>':''}

          <button class="ml-btn"
            onclick="window.open('${linkAfiliado}','_blank')">
            Comprar no Mercado Livre
          </button>
        </div>
      </div>
    `;
  });
}

</script>

</body>
</html>







