<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compara+ | Compare PreÃ§os</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',Arial,sans-serif;background:#0a0e1a;color:#fff;min-height:100vh;}
a{text-decoration:none;}

/* HEADER */
header{
  background:linear-gradient(90deg,#0a0e1a,#0f1e30);
  border-bottom:1px solid #ffffff12;
  padding:0 24px;
  position:sticky;top:0;z-index:999;
  backdrop-filter:blur(14px);
}
.header-inner{
  max-width:1280px;margin:auto;
  display:flex;align-items:center;justify-content:space-between;
  height:66px;gap:16px;
}
.logo{font-size:1.65rem;font-weight:900;white-space:nowrap;letter-spacing:-0.5px;}
.logo span{color:#0f62fe;}

nav{display:flex;gap:4px;}
nav button{
  background:transparent;border:none;color:#bbb;
  padding:8px 13px;border-radius:9px;cursor:pointer;
  font-size:0.86rem;font-weight:600;transition:all 0.2s;white-space:nowrap;
}
nav button:hover,nav button.active{background:#0f62fe;color:#fff;}

.header-search{display:flex;flex:1;max-width:420px;}
.header-search input{
  flex:1;padding:10px 15px;border-radius:10px 0 0 10px;
  border:1.5px solid #0f62fe55;background:#ffffff0e;
  color:#fff;font-size:0.93rem;outline:none;transition:0.2s;
}
.header-search input:focus{border-color:#0f62fe;}
.header-search input::placeholder{color:#777;}
.header-search button{
  padding:10px 17px;background:#0f62fe;border:none;
  border-radius:0 10px 10px 0;color:#fff;cursor:pointer;font-size:1.1rem;transition:0.2s;
}
.header-search button:hover{background:#0050d0;}

/* PÃGINAS */
.page{display:none;max-width:1280px;margin:auto;padding:32px 24px;}
.page.active{display:block;}

/* HERO */
.hero{
  background:linear-gradient(135deg,#0b1220,#0f2744,#0f62fe28);
  border-radius:22px;padding:64px 44px;text-align:center;
  margin-bottom:44px;border:1px solid #0f62fe22;
  position:relative;overflow:hidden;
}
.hero::before{
  content:'';position:absolute;top:-60%;left:-60%;
  width:220%;height:220%;
  background:radial-gradient(circle,#0f62fe0e 0%,transparent 55%);
  animation:pulse 5s ease-in-out infinite;
}
@keyframes pulse{0%,100%{transform:scale(1);opacity:0.4;}50%{transform:scale(1.08);opacity:1;}}
.hero-tag{
  display:inline-block;background:#0f62fe22;border:1px solid #0f62fe55;
  color:#6ba3ff;font-size:0.78rem;font-weight:700;
  padding:5px 14px;border-radius:20px;margin-bottom:18px;position:relative;
}
.hero h2{font-size:3rem;font-weight:900;margin-bottom:14px;position:relative;line-height:1.15;}
.hero h2 span{color:#0f62fe;}
.hero p{opacity:0.75;font-size:1.05rem;margin-bottom:36px;position:relative;line-height:1.6;}
.hero-search{
  display:flex;max-width:620px;margin:auto;position:relative;
  box-shadow:0 0 50px #0f62fe33;border-radius:14px;
}
.hero-search input{
  flex:1;padding:18px 22px;border-radius:14px 0 0 14px;
  border:2px solid #0f62fe;background:#ffffff0d;
  color:#fff;font-size:1.05rem;outline:none;
}
.hero-search input::placeholder{color:#888;}
.hero-search button{
  padding:18px 28px;background:#0f62fe;border:none;
  border-radius:0 14px 14px 0;color:#fff;font-size:1rem;
  cursor:pointer;font-weight:700;transition:0.2s;white-space:nowrap;
}
.hero-search button:hover{background:#0050d0;}

/* PLATFORMS STRIP */
.platforms-strip{
  display:flex;justify-content:center;gap:18px;flex-wrap:wrap;
  margin-top:28px;position:relative;
}
.plat-badge{
  display:flex;align-items:center;gap:7px;
  background:#ffffff08;border:1px solid #ffffff14;
  padding:7px 16px;border-radius:30px;font-size:0.82rem;font-weight:700;
}

/* STATS */
.stats{
  display:flex;justify-content:center;gap:40px;flex-wrap:wrap;
  margin-top:28px;position:relative;
}
.stat{text-align:center;}
.stat-number{font-size:1.6rem;font-weight:900;color:#0f62fe;}
.stat-label{font-size:0.75rem;color:#888;margin-top:2px;}

/* SECTION TITLE */
.section-title{
  font-size:1.35rem;font-weight:800;margin-bottom:18px;
  display:flex;align-items:center;gap:10px;
}
.section-title span{color:#0f62fe;}
.section-title a{
  margin-left:auto;font-size:0.8rem;color:#0f62fe;
  font-weight:600;cursor:pointer;opacity:0.8;
}
.section-title a:hover{opacity:1;}

/* CHIPS */
.chips{display:flex;gap:9px;flex-wrap:wrap;margin-bottom:24px;}
.chip{
  padding:8px 18px;border-radius:30px;border:1.5px solid #ffffff1a;
  background:#ffffff08;color:#bbb;cursor:pointer;font-size:0.84rem;
  font-weight:600;transition:0.2s;white-space:nowrap;
}
.chip:hover,.chip.active{background:#0f62fe;border-color:#0f62fe;color:#fff;}

/* GRID */
.products-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(210px,1fr));
  gap:18px;margin-bottom:44px;
}

/* CARD */
.card{
  background:linear-gradient(160deg,#111827,#192240);
  border:1px solid #ffffff0f;border-radius:16px;
  overflow:hidden;transition:all 0.25s;
  display:flex;flex-direction:column;position:relative;
}
.card:hover{transform:translateY(-6px);border-color:#0f62fe55;box-shadow:0 12px 36px #0f62fe22;}
.card-ribbon{position:absolute;top:10px;left:10px;z-index:2;display:flex;gap:5px;flex-wrap:wrap;}
.card-img{
  width:100%;height:180px;object-fit:contain;
  background:#ffffff07;padding:14px;transition:0.3s;
}
.card:hover .card-img{transform:scale(1.05);}
.card-body{padding:14px;flex:1;display:flex;flex-direction:column;gap:8px;}
.card-store{
  font-size:0.7rem;font-weight:700;padding:3px 9px;
  border-radius:20px;display:inline-block;width:fit-content;
}
.store-ml{background:#ffe60018;color:#ffe600;border:1px solid #ffe60033;}
.card-title{
  font-size:0.82rem;color:#d0d8e8;line-height:1.45;flex:1;
  display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;
}
.card-price{font-size:1.2rem;font-weight:900;color:#fff;}
.card-installment{font-size:0.73rem;color:#999;}
.card-btn{
  display:block;text-align:center;
  padding:10px;background:#0f62fe;color:#fff;
  border-radius:9px;font-weight:700;font-size:0.84rem;
  margin-top:auto;transition:0.2s;border:none;cursor:pointer;
}
.card-btn:hover{background:#0050d0;color:#fff;}

/* BADGES */
.badge{font-size:0.68rem;font-weight:800;padding:3px 9px;border-radius:20px;display:inline-block;}
.badge-cheap{background:#00d084;color:#000;}
.badge-hot{background:linear-gradient(90deg,#ff4444,#ff8800);color:#fff;}
.card-cheapest{border-color:#00d08455 !important;box-shadow:0 0 22px #00d08422 !important;}

/* OUTROS LINKS PLATAFORMA */
.card-platforms{margin-top:8px;padding-top:8px;border-top:1px solid #ffffff0d;}
.cp-label{font-size:0.68rem;color:#777;font-weight:600;display:block;margin-bottom:6px;}
.cp-btns{display:flex;gap:5px;flex-wrap:wrap;}
.cp-btn{
  font-size:0.7rem;font-weight:700;padding:5px 9px;
  border-radius:7px;text-decoration:none;transition:0.2s;
  display:inline-flex;align-items:center;gap:3px;white-space:nowrap;
}
.cp-btn:hover{opacity:0.9;transform:translateY(-2px);}
.cp-shopee{background:#ee4d2d18;color:#ff6b4a;border:1px solid #ee4d2d44;}
.cp-magalu{background:#0086ff18;color:#4db3ff;border:1px solid #0086ff44;}
.cp-shein{background:#ff006618;color:#ff66aa;border:1px solid #ff006644;}

/* ORDER BAR */
.order-bar{
  display:flex;align-items:center;gap:10px;margin-bottom:22px;flex-wrap:wrap;
  background:#ffffff06;padding:14px 18px;border-radius:12px;border:1px solid #ffffff0a;
}
.order-bar span{font-size:0.88rem;color:#888;font-weight:600;}
.order-btn{
  padding:7px 16px;border-radius:8px;border:1.5px solid #0f62fe44;
  background:transparent;color:#88aaff;cursor:pointer;font-size:0.83rem;font-weight:600;transition:0.2s;
}
.order-btn.active,.order-btn:hover{background:#0f62fe;color:#fff;border-color:#0f62fe;}

/* SEARCH HEADER */
.search-header{
  display:flex;align-items:center;justify-content:space-between;
  flex-wrap:wrap;gap:12px;margin-bottom:16px;
}
.search-header h2{font-size:1.3rem;font-weight:800;}
.result-count{
  background:#0f62fe18;border:1px solid #0f62fe33;
  padding:5px 15px;border-radius:20px;font-size:0.83rem;color:#88aaff;font-weight:600;
}

/* PLATFORM TABS */
.platform-tabs{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap;}
.ptab{
  padding:9px 20px;border-radius:10px;border:1.5px solid #ffffff15;
  background:#ffffff08;color:#aaa;cursor:pointer;font-size:0.85rem;font-weight:700;transition:0.2s;
}
.ptab:hover{background:#ffffff12;}
.ptab.active-ml{background:#ffe60020;border-color:#ffe60066;color:#ffe600;}
.ptab.active-shopee{background:#ee4d2d20;border-color:#ee4d2d66;color:#ff6b4a;}
.ptab.active-magalu{background:#0086ff20;border-color:#0086ff66;color:#4db3ff;}
.ptab.active-shein{background:#ff006620;border-color:#ff006666;color:#ff66aa;}

/* CUPONS */
.coupons-grid{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));
  gap:16px;margin-bottom:40px;
}
.coupon-card{
  background:linear-gradient(135deg,#0f1e35,#0f62fe18);
  border:1.5px dashed #0f62fe44;border-radius:15px;
  padding:20px;display:flex;gap:16px;align-items:center;transition:0.2s;
}
.coupon-card:hover{border-color:#0f62fe99;box-shadow:0 0 24px #0f62fe18;}
.coupon-icon{font-size:2.4rem;flex-shrink:0;}
.coupon-info h4{font-size:1rem;font-weight:800;margin-bottom:3px;}
.coupon-info p{font-size:0.78rem;color:#999;margin-bottom:8px;line-height:1.4;}
.coupon-savings{font-size:0.78rem;color:#00d084;font-weight:800;margin-bottom:8px;}
.coupon-code{
  background:#0f62fe;color:#fff;padding:5px 14px;
  border-radius:7px;font-size:0.8rem;font-weight:700;
  display:inline-block;letter-spacing:1.5px;cursor:pointer;transition:0.2s;
}
.coupon-code:hover{background:#0050d0;transform:scale(1.04);}

/* LOADING */
.loading{
  text-align:center;padding:70px 20px;
  display:flex;flex-direction:column;align-items:center;gap:16px;grid-column:1/-1;
}
.spinner{
  width:48px;height:48px;border:4px solid #ffffff15;
  border-top:4px solid #0f62fe;border-radius:50%;animation:spin 0.8s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}
.loading p{color:#888;font-size:0.9rem;}

/* ERRO */
.error-box{
  text-align:center;padding:44px 20px;
  background:#ff444418;border:1.5px solid #ff4444;
  border-radius:15px;grid-column:1/-1;
}
.error-box h3{color:#ff7777;font-size:1.1rem;margin-bottom:8px;}
.error-box p{color:#999;font-size:0.85rem;margin-bottom:16px;}
.error-links{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;}
.error-links a{
  padding:10px 20px;border-radius:10px;font-weight:800;
  font-size:0.85rem;text-decoration:none;transition:0.2s;
}
.error-links a:hover{opacity:0.85;transform:translateY(-2px);}

/* EMPTY */
.empty-box{text-align:center;padding:70px 20px;opacity:0.55;grid-column:1/-1;}
.empty-box .icon{font-size:4.5rem;margin-bottom:16px;}
.empty-box h3{font-size:1.2rem;margin-bottom:8px;}
.empty-box p{font-size:0.88rem;color:#999;}

/* TOAST */
.toast{
  position:fixed;bottom:28px;right:28px;
  background:#0f62fe;color:#fff;padding:13px 22px;
  border-radius:12px;font-weight:600;font-size:0.88rem;
  box-shadow:0 6px 24px #0f62fe44;
  transform:translateY(120px);opacity:0;
  transition:all 0.35s cubic-bezier(.22,.68,0,1.3);z-index:9999;
}
.toast.show{transform:translateY(0);opacity:1;}

/* FOOTER */
footer{
  text-align:center;padding:32px 20px;
  border-top:1px solid #ffffff0d;color:#555;font-size:0.82rem;margin-top:40px;
}
footer span{color:#0f62fe;font-weight:700;}
footer p+p{margin-top:6px;}

/* MOBILE NAV */
.mobile-nav{
  display:none;position:fixed;bottom:0;left:0;right:0;
  background:#0d1320;border-top:1px solid #ffffff10;
  padding:8px 0 10px;z-index:998;
}
.mobile-nav-inner{display:flex;justify-content:space-around;max-width:500px;margin:auto;}
.mobile-nav-btn{
  display:flex;flex-direction:column;align-items:center;
  gap:3px;background:none;border:none;color:#888;
  cursor:pointer;font-size:0.62rem;font-weight:600;padding:4px 10px;border-radius:10px;transition:0.2s;
}
.mobile-nav-btn .mnav-icon{font-size:1.4rem;line-height:1;}
.mobile-nav-btn.active,.mobile-nav-btn:hover{color:#0f62fe;}

/* RESPONSIVE */
@media(max-width:700px){
  .hero{padding:44px 20px;}
  .hero h2{font-size:2rem;}
  nav{display:none;}
  .mobile-nav{display:block;}
  .header-search{max-width:100%;}
  .products-grid{grid-template-columns:repeat(auto-fill,minmax(158px,1fr));gap:12px;}
  body{padding-bottom:72px;}
  .page{padding:24px 16px;}
}
@media(max-width:400px){
  .products-grid{grid-template-columns:1fr 1fr;}
}
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="logo">ğŸ’° Compara<span>+</span></div>
    <nav>
      <button class="active" onclick="goPage('home')">ğŸ  InÃ­cio</button>
      <button onclick="goPage('ofertas')">ğŸ”¥ Ofertas</button>
      <button onclick="goPage('mais-buscados')">ğŸ“ˆ Mais Buscados</button>
      <button onclick="goPage('mais-vendidos')">ğŸ† Mais Vendidos</button>
      <button onclick="goPage('cupons')">ğŸŸï¸ Cupons</button>
    </nav>
    <div class="header-search">
      <input type="text" id="headerSearch" placeholder="Buscar produto...">
      <button onclick="doSearch(document.getElementById('headerSearch').value)">ğŸ”</button>
    </div>
  </div>
</header>

<!-- MOBILE NAV -->
<div class="mobile-nav">
  <div class="mobile-nav-inner">
    <button class="mobile-nav-btn active" onclick="goPage('home')"><span class="mnav-icon">ğŸ </span>InÃ­cio</button>
    <button class="mobile-nav-btn" onclick="goPage('ofertas')"><span class="mnav-icon">ğŸ”¥</span>Ofertas</button>
    <button class="mobile-nav-btn" onclick="goPage('mais-buscados')"><span class="mnav-icon">ğŸ“ˆ</span>Buscados</button>
    <button class="mobile-nav-btn" onclick="goPage('mais-vendidos')"><span class="mnav-icon">ğŸ†</span>Vendidos</button>
    <button class="mobile-nav-btn" onclick="goPage('cupons')"><span class="mnav-icon">ğŸŸï¸</span>Cupons</button>
  </div>
</div>

<!-- HOME -->
<div id="page-home" class="page active">
  <div class="hero">
    <div class="hero-tag">âš¡ Comparador de PreÃ§os #1 do Brasil</div>
    <h2>Compare e economize<br><span>nos melhores produtos</span></h2>
    <p>Busque qualquer produto e veja os melhores preÃ§os<br>das maiores lojas do Brasil em um sÃ³ lugar.</p>
    <div class="hero-search">
      <input type="text" id="heroSearch" placeholder="Ex: iPhone 15, Notebook Gamer, Fone Bluetooth...">
      <button onclick="doSearch(document.getElementById('heroSearch').value)">ğŸ” Buscar Agora</button>
    </div>
    <div class="platforms-strip">
      <div class="plat-badge">ğŸŸ¡ Mercado Livre</div>
      <div class="plat-badge">ğŸŸ  Shopee</div>
      <div class="plat-badge">ğŸ”µ Magalu</div>
      <div class="plat-badge">ğŸ©· Shein</div>
    </div>
    <div class="stats">
      <div class="stat"><div class="stat-number">20+</div><div class="stat-label">Resultados por busca</div></div>
      <div class="stat"><div class="stat-number">4</div><div class="stat-label">Plataformas comparadas</div></div>
      <div class="stat"><div class="stat-number">100%</div><div class="stat-label">Gratuito</div></div>
    </div>
  </div>

  <div class="section-title">ğŸ—‚ï¸ Categorias <span>Populares</span></div>
  <div class="chips" id="homeChips">
    <div class="chip active" onclick="selectChip(this,'smartphone samsung')">ğŸ“± Smartphones</div>
    <div class="chip" onclick="selectChip(this,'notebook')">ğŸ’» Notebooks</div>
    <div class="chip" onclick="selectChip(this,'fone bluetooth')">ğŸ§ Fones</div>
    <div class="chip" onclick="selectChip(this,'smart tv')">ğŸ“º Smart TVs</div>
    <div class="chip" onclick="selectChip(this,'playstation xbox')">ğŸ® Games</div>
    <div class="chip" onclick="selectChip(this,'camera fotografica')">ğŸ“· CÃ¢meras</div>
    <div class="chip" onclick="selectChip(this,'tablet')">ğŸ–¥ï¸ Tablets</div>
    <div class="chip" onclick="selectChip(this,'smartwatch')">âŒš Smartwatches</div>
  </div>

  <div class="section-title">âš¡ Destaques <span>do Dia</span> <a onclick="loadHome()">â†» Atualizar</a></div>
  <div id="homeHighlights" class="products-grid">
    <div class="loading"><div class="spinner"></div><p>Carregando destaques...</p></div>
  </div>

  <div class="section-title">ğŸ”¥ Em <span>Alta Agora</span></div>
  <div id="homeTrending" class="products-grid">
    <div class="loading"><div class="spinner"></div><p>Carregando produtos em alta...</p></div>
  </div>
</div>

<!-- BUSCA -->
<div id="page-search" class="page">
  <div class="search-header">
    <h2 id="searchTitle">Resultados da busca</h2>
    <div class="result-count" id="resultCount"></div>
  </div>

  <div class="platform-tabs">
    <div class="ptab active-ml" onclick="openPlatformSearch('ml')">ğŸŸ¡ Mercado Livre</div>
    <div class="ptab" onclick="openPlatformSearch('shopee')">ğŸŸ  Shopee â†’</div>
    <div class="ptab" onclick="openPlatformSearch('magalu')">ğŸ”µ Magalu â†’</div>
    <div class="ptab" onclick="openPlatformSearch('shein')">ğŸ©· Shein â†’</div>
  </div>

  <div class="order-bar">
    <span>Ordenar por:</span>
    <button class="order-btn active" onclick="sortProducts('asc',this)">ğŸ’² Menor PreÃ§o</button>
    <button class="order-btn" onclick="sortProducts('desc',this)">ğŸ’² Maior PreÃ§o</button>
    <button class="order-btn" onclick="sortProducts('none',this)">â­ RelevÃ¢ncia</button>
  </div>

  <div id="searchResults" class="products-grid"></div>
</div>

<!-- OFERTAS -->
<div id="page-ofertas" class="page">
  <div class="section-title">ğŸ”¥ Melhores <span>Ofertas</span></div>
  <div class="chips" id="ofertasChips">
    <div class="chip active" onclick="selectOfertaChip(this,'smartphone')">ğŸ“± Celulares</div>
    <div class="chip" onclick="selectOfertaChip(this,'notebook')">ğŸ’» Notebooks</div>
    <div class="chip" onclick="selectOfertaChip(this,'smart tv')">ğŸ“º TVs</div>
    <div class="chip" onclick="selectOfertaChip(this,'fone bluetooth')">ğŸ§ Fones</div>
    <div class="chip" onclick="selectOfertaChip(this,'smartwatch')">âŒš RelÃ³gios</div>
    <div class="chip" onclick="selectOfertaChip(this,'console games')">ğŸ® Games</div>
    <div class="chip" onclick="selectOfertaChip(this,'tablet')">ğŸ–¥ï¸ Tablets</div>
    <div class="chip" onclick="selectOfertaChip(this,'camera')">ğŸ“· CÃ¢meras</div>
  </div>
  <div id="ofertasGrid" class="products-grid">
    <div class="loading"><div class="spinner"></div><p>Carregando ofertas...</p></div>
  </div>
</div>

<!-- MAIS BUSCADOS -->
<div id="page-mais-buscados" class="page">
  <div class="section-title">ğŸ“ˆ Mais <span>Buscados</span></div>
  <div class="chips" id="buscadosChips">
    <div class="chip active" onclick="selectBuscadoChip(this,'iPhone')">ğŸ“± iPhone</div>
    <div class="chip" onclick="selectBuscadoChip(this,'Samsung Galaxy')">ğŸŒŒ Samsung</div>
    <div class="chip" onclick="selectBuscadoChip(this,'AirPods')">ğŸ§ AirPods</div>
    <div class="chip" onclick="selectBuscadoChip(this,'PlayStation 5')">ğŸ® PS5</div>
    <div class="chip" onclick="selectBuscadoChip(this,'Xiaomi')">ğŸ“² Xiaomi</div>
    <div class="chip" onclick="selectBuscadoChip(this,'MacBook')">ğŸ’» MacBook</div>
    <div class="chip" onclick="selectBuscadoChip(this,'Nintendo Switch')">ğŸ•¹ï¸ Nintendo</div>
    <div class="chip" onclick="selectBuscadoChip(this,'Kindle')">ğŸ“š Kindle</div>
    <div class="chip" onclick="selectBuscadoChip(this,'Motorola')">ğŸ“± Motorola</div>
    <div class="chip" onclick="selectBuscadoChip(this,'GoPro')">ğŸ¥ GoPro</div>
  </div>
  <div id="maisBuscadosGrid" class="products-grid">
    <div class="loading"><div class="spinner"></div><p>Carregando...</p></div>
  </div>
</div>

<!-- MAIS VENDIDOS -->
<div id="page-mais-vendidos" class="page">
  <div class="section-title">ğŸ† Mais <span>Vendidos</span></div>
  <div class="chips" id="vendidosChips">
    <div class="chip active" onclick="selectVendidoChip(this,'eletronico mais vendido')">ğŸ† Geral</div>
    <div class="chip" onclick="selectVendidoChip(this,'celular mais vendido')">ğŸ“± Celulares</div>
    <div class="chip" onclick="selectVendidoChip(this,'notebook mais vendido')">ğŸ’» Notebooks</div>
    <div class="chip" onclick="selectVendidoChip(this,'fone bluetooth mais vendido')">ğŸ§ Fones</div>
    <div class="chip" onclick="selectVendidoChip(this,'smart tv mais vendido')">ğŸ“º TVs</div>
    <div class="chip" onclick="selectVendidoChip(this,'games mais vendido')">ğŸ® Games</div>
  </div>
  <div class="order-bar" style="margin-top:0;">
    <span>Ordenar:</span>
    <button class="order-btn active" onclick="sortMaisVendidos('asc',this)">ğŸ’² Menor PreÃ§o</button>
    <button class="order-btn" onclick="sortMaisVendidos('desc',this)">ğŸ’² Maior PreÃ§o</button>
  </div>
  <div id="maisVendidosGrid" class="products-grid">
    <div class="loading"><div class="spinner"></div><p>Carregando...</p></div>
  </div>
</div>

<!-- CUPONS -->
<div id="page-cupons" class="page">
  <div class="section-title">ğŸŸï¸ Cupons e <span>PromoÃ§Ãµes</span></div>
  <div id="cuponsGrid" class="coupons-grid"></div>
  <div class="section-title">ğŸ›ï¸ Produtos com <span>Desconto</span></div>
  <div id="cuponsProducts" class="products-grid">
    <div class="loading"><div class="spinner"></div><p>Carregando promos...</p></div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- FOOTER -->
<footer>
  <p>ğŸ’° <span>Compara+</span> Â© 2026 â€” Compare preÃ§os e economize de verdade</p>
  <p>Resultados via API oficial do Mercado Livre</p>
</footer>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFIGURAÃ‡ÃƒO â€” IDs DE AFILIADO
   Preencha os outros quando tiver
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var AFFILIATES = {
  ml:     'df20251014105211',
  shopee: '',
  magalu: '',
  shein:  ''
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ESTADO GLOBAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var currentSearchData  = [];
var currentVendidoData = [];
var currentQuery       = '';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LINKS DE BUSCA â€” OUTRAS PLATAFORMAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildShopeeLink(q){
  var url = 'https://shopee.com.br/search?keyword=' + encodeURIComponent(q);
  if(AFFILIATES.shopee) url += '&af_id=' + AFFILIATES.shopee;
  return url;
}
function buildMagaluLink(q){
  var slug = encodeURIComponent(q).replace(/%20/g,'-');
  var url  = 'https://www.magazineluiza.com.br/busca/' + slug + '/';
  if(AFFILIATES.magalu) url += '?partner_id=' + AFFILIATES.magalu;
  return url;
}
function buildSheinLink(q){
  var url = 'https://www.shein.com.br/pdsearch/' + encodeURIComponent(q) + '/';
  if(AFFILIATES.shein) url += '?ref=' + AFFILIATES.shein;
  return url;
}
function buildMlSearchLink(q){
  return 'https://lista.mercadolivre.com.br/' + encodeURIComponent(q).replace(/%20/g,'-') + '?affiliateId=' + AFFILIATES.ml;
}
function affLink(permalink){
  if(!permalink) return '#';
  try{
    var u = new URL(permalink);
    u.searchParams.set('affiliateId', AFFILIATES.ml);
    return u.toString();
  }catch(e){
    return permalink + '?affiliateId=' + AFFILIATES.ml;
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FETCH MERCADO LIVRE
   Chama /api/buscar (Vercel serverless)
   que faz a requisiÃ§Ã£o server-side sem CORS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function fetchML(query, limit, sort){
  return new Promise(function(resolve){

    var lim = limit || 20;
    var url = '/api/buscar?q=' + encodeURIComponent(query) + '&limit=' + lim;
    if(sort) url += '&sort=' + encodeURIComponent(sort);

    fetch(url)
      .then(function(r){
        if(!r.ok) throw new Error('HTTP ' + r.status);
        return r.json();
      })
      .then(function(data){
        if(Array.isArray(data) && data.length > 0){
          resolve(data);
        } else {
          resolve([]);
        }
      })
      .catch(function(err){
        console.warn('[Compara+] /api/buscar falhou:', err.message);
        resolve([]);
      });

  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORMATAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function fmtPrice(v){
  return v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CRIAR CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function createCard(item, isCheapest){
  var img   = (item.thumbnail||'').replace('-I.jpg','-O.jpg');
  var title = item.title || '';
  var price = item.price || 0;
  var link  = affLink(item.permalink);
  var inst  = item.installments;
  var instText = inst ? inst.quantity+'x de '+fmtPrice(inst.amount)+' sem juros' : '';

  var badges = '';
  if(isCheapest) badges += '<span class="badge badge-cheap">âœ… MENOR PREÃ‡O</span>';
  if(item.sold_quantity && item.sold_quantity > 500) badges += '<span class="badge badge-hot">ğŸ”¥ TOP</span>';
  var ribbon = badges ? '<div class="card-ribbon">'+badges+'</div>' : '';

  var noImg = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='180'%3E%3Crect fill='%23ffffff06' width='200' height='180'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23555' font-size='48'%3E%F0%9F%93%A6%3C/text%3E%3C/svg%3E";

  /* Links para outras plataformas usando o tÃ­tulo do produto */
  var shopeeUrl = buildShopeeLink(title);
  var magaluUrl = buildMagaluLink(title);
  var sheinUrl  = buildSheinLink(title);

  var platformLinks = '<div class="card-platforms">'
    + '<span class="cp-label">ğŸ” Ver em outras lojas:</span>'
    + '<div class="cp-btns">'
    + '<a href="'+shopeeUrl+'" target="_blank" rel="noopener" class="cp-btn cp-shopee">ğŸŸ  Shopee</a>'
    + '<a href="'+magaluUrl+'" target="_blank" rel="noopener" class="cp-btn cp-magalu">ğŸ”µ Magalu</a>'
    + '<a href="'+sheinUrl+'"  target="_blank" rel="noopener" class="cp-btn cp-shein">ğŸ©· Shein</a>'
    + '</div></div>';

  return '<div class="card'+(isCheapest?' card-cheapest':'')+'">'
    + ribbon
    + '<img class="card-img" src="'+img+'" alt="'+title.replace(/"/g,"'")+'" onerror="this.src=\''+noImg+'\'">'
    + '<div class="card-body">'
    + '<span class="card-store store-ml">ğŸŸ¡ Mercado Livre</span>'
    + '<div class="card-title">'+title+'</div>'
    + '<div class="card-price">'+fmtPrice(price)+'</div>'
    + (instText ? '<div class="card-installment">ğŸ”„ '+instText+'</div>' : '')
    + '<a class="card-btn" href="'+link+'" target="_blank" rel="noopener sponsored">Ver Oferta â†’</a>'
    + platformLinks
    + '</div></div>';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderGrid(id, items, sort){
  var el = document.getElementById(id);
  if(!items || items.length === 0){
    el.innerHTML = '<div class="empty-box"><div class="icon">ğŸ˜•</div><h3>Nada encontrado</h3><p>Tente outro termo de busca</p></div>';
    return;
  }
  var sorted = items.slice();
  if(sort === 'asc')  sorted.sort(function(a,b){ return a.price - b.price; });
  if(sort === 'desc') sorted.sort(function(a,b){ return b.price - a.price; });
  el.innerHTML = sorted.map(function(item, i){
    return createCard(item, sort === 'asc' && i === 0);
  }).join('');
}

function renderLoading(id, msg){
  document.getElementById(id).innerHTML =
    '<div class="loading"><div class="spinner"></div><p>'+(msg||'Carregando...')+'</p></div>';
}

function renderError(id, query){
  var ml  = query ? buildMlSearchLink(query)   : '#';
  var sh  = query ? buildShopeeLink(query)      : '#';
  var mg  = query ? buildMagaluLink(query)      : '#';
  var sn  = query ? buildSheinLink(query)       : '#';
  document.getElementById(id).innerHTML =
    '<div class="error-box">'
    + '<h3>âš ï¸ NÃ£o foi possÃ­vel carregar</h3>'
    + '<p>Busque diretamente nas plataformas:</p>'
    + '<div class="error-links">'
    + '<a href="'+ml+'" target="_blank" rel="noopener" style="background:#ffe600;color:#000;">ğŸŸ¡ Mercado Livre</a>'
    + '<a href="'+sh+'" target="_blank" rel="noopener" style="background:#ee4d2d;color:#fff;">ğŸŸ  Shopee</a>'
    + '<a href="'+mg+'" target="_blank" rel="noopener" style="background:#0086ff;color:#fff;">ğŸ”µ Magalu</a>'
    + '<a href="'+sn+'" target="_blank" rel="noopener" style="background:#ff0066;color:#fff;">ğŸ©· Shein</a>'
    + '</div></div>';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUSCA PRINCIPAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function doSearch(query){
  query = (query || '').trim();
  if(!query){ showToast('âš ï¸ Digite um produto!'); return; }
  currentQuery = query;

  document.getElementById('heroSearch').value   = query;
  document.getElementById('headerSearch').value = query;

  document.querySelectorAll('.page').forEach(function(p){ p.classList.remove('active'); });
  document.querySelectorAll('nav button').forEach(function(b){ b.classList.remove('active'); });
  document.querySelectorAll('.mobile-nav-btn').forEach(function(b){ b.classList.remove('active'); });
  document.getElementById('page-search').classList.add('active');
  window.scrollTo({top:0, behavior:'smooth'});

  document.getElementById('searchTitle').textContent = 'Resultados para "'+query+'"';
  document.getElementById('resultCount').textContent = 'Buscando...';
  renderLoading('searchResults', 'Buscando produtos no Mercado Livre...');

  /* Reset ordenaÃ§Ã£o */
  document.querySelectorAll('#page-search .order-btn').forEach(function(b){ b.classList.remove('active'); });
  document.querySelectorAll('#page-search .order-btn')[0].classList.add('active');

  try{
    var items = await fetchML(query, 20);
    currentSearchData = items;
    var cnt = items.length;
    document.getElementById('resultCount').textContent = cnt ? cnt + ' resultados' : 'Nenhum resultado';
    if(cnt > 0){
      renderGrid('searchResults', items, 'asc');
    } else {
      renderError('searchResults', query);
    }
  }catch(e){
    renderError('searchResults', query);
    document.getElementById('resultCount').textContent = 'Erro na busca';
  }
}

function sortProducts(order, btn){
  document.querySelectorAll('#page-search .order-btn').forEach(function(b){ b.classList.remove('active'); });
  btn.classList.add('active');
  renderGrid('searchResults', currentSearchData, order);
}

function openPlatformSearch(platform){
  if(!currentQuery && platform !== 'ml'){ showToast('âš ï¸ FaÃ§a uma busca primeiro!'); return; }
  var urls = {
    ml:     buildMlSearchLink(currentQuery),
    shopee: buildShopeeLink(currentQuery),
    magalu: buildMagaluLink(currentQuery),
    shein:  buildSheinLink(currentQuery)
  };
  if(urls[platform]) window.open(urls[platform], '_blank', 'noopener,noreferrer');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadHome(){
  renderLoading('homeHighlights', 'Carregando destaques...');
  renderLoading('homeTrending',   'Carregando em alta...');
  try{
    var h = await fetchML('smartphone samsung', 8);
    renderGrid('homeHighlights', h, 'asc');
  }catch(e){ renderError('homeHighlights', 'smartphone'); }
  try{
    var t = await fetchML('notebook gamer', 8);
    renderGrid('homeTrending', t, 'asc');
  }catch(e){ renderError('homeTrending', 'notebook gamer'); }
}

function selectChip(el, query){
  document.querySelectorAll('#homeChips .chip').forEach(function(c){ c.classList.remove('active'); });
  el.classList.add('active');
  renderLoading('homeHighlights', 'Carregando...');
  fetchML(query, 8).then(function(items){
    renderGrid('homeHighlights', items, 'asc');
  }).catch(function(){ renderError('homeHighlights', query); });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   OFERTAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadOfertas(query){
  renderLoading('ofertasGrid', 'Carregando ofertas...');
  try{
    var items = await fetchML(query, 16);
    renderGrid('ofertasGrid', items, 'asc');
  }catch(e){ renderError('ofertasGrid', query); }
}
function selectOfertaChip(el, query){
  document.querySelectorAll('#ofertasChips .chip').forEach(function(c){ c.classList.remove('active'); });
  el.classList.add('active');
  loadOfertas(query);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIS BUSCADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadMaisBuscados(query){
  renderLoading('maisBuscadosGrid', 'Carregando...');
  try{
    var items = await fetchML(query, 16);
    renderGrid('maisBuscadosGrid', items, 'asc');
  }catch(e){ renderError('maisBuscadosGrid', query); }
}
function selectBuscadoChip(el, query){
  document.querySelectorAll('#buscadosChips .chip').forEach(function(c){ c.classList.remove('active'); });
  el.classList.add('active');
  loadMaisBuscados(query);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIS VENDIDOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadMaisVendidos(query){
  renderLoading('maisVendidosGrid', 'Carregando mais vendidos...');
  document.querySelectorAll('#page-mais-vendidos .order-btn').forEach(function(b){ b.classList.remove('active'); });
  document.querySelectorAll('#page-mais-vendidos .order-btn')[0].classList.add('active');
  try{
    var items = await fetchML(query, 16, 'sold_quantity_desc');
    currentVendidoData = items;
    renderGrid('maisVendidosGrid', items, 'asc');
  }catch(e){
    try{
      var items2 = await fetchML(query, 16);
      currentVendidoData = items2;
      renderGrid('maisVendidosGrid', items2, 'asc');
    }catch(e2){ renderError('maisVendidosGrid', query); }
  }
}
function sortMaisVendidos(order, btn){
  document.querySelectorAll('#page-mais-vendidos .order-btn').forEach(function(b){ b.classList.remove('active'); });
  btn.classList.add('active');
  renderGrid('maisVendidosGrid', currentVendidoData, order);
}
function selectVendidoChip(el, query){
  document.querySelectorAll('#vendidosChips .chip').forEach(function(c){ c.classList.remove('active'); });
  el.classList.add('active');
  loadMaisVendidos(query);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CUPONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function loadCupons(){
  var coupons = [
    {icon:'ğŸŸ¡',store:'Mercado Livre',desc:'Frete grÃ¡tis em todo o site',code:'MLFRETE',savings:'Frete GrÃ¡tis'},
    {icon:'ğŸ’³',store:'Mercado Pago', desc:'10% OFF pagando com Mercado Pago',code:'MP10OFF',savings:'10% OFF'},
    {icon:'ğŸ“±',store:'Mercado Livre',desc:'PromoÃ§Ã£o exclusiva em smartphones',code:'CELULAR15',savings:'15% OFF'},
    {icon:'ğŸ®',store:'Mercado Livre',desc:'Desconto em games e consoles',code:'GAME20',savings:'20% OFF'},
    {icon:'ğŸ’»',store:'Mercado Livre',desc:'Notebooks e computadores em oferta',code:'TECH25',savings:'25% OFF'},
    {icon:'ğŸ ',store:'Mercado Livre',desc:'Casa, jardim e decoraÃ§Ã£o',code:'CASA10',savings:'10% OFF'},
    {icon:'ğŸ‘Ÿ',store:'Mercado Livre',desc:'Moda e acessÃ³rios com desconto',code:'MODA12',savings:'12% OFF'},
    {icon:'ğŸ“¦',store:'Mercado Livre',desc:'Primeiros pedidos com desconto',code:'NOVO30',savings:'30% OFF'},
  ];
  document.getElementById('cuponsGrid').innerHTML = coupons.map(function(c){
    return '<div class="coupon-card">'
      + '<div class="coupon-icon">'+c.icon+'</div>'
      + '<div class="coupon-info">'
      + '<h4>'+c.store+'</h4>'
      + '<p>'+c.desc+'</p>'
      + '<div class="coupon-savings">ğŸ’° '+c.savings+'</div>'
      + '<div class="coupon-code" onclick="copyCode(\''+c.code+'\')">ğŸ“‹ '+c.code+'</div>'
      + '</div></div>';
  }).join('');
  loadCuponsProducts();
}

async function loadCuponsProducts(){
  try{
    var items = await fetchML('promocao oferta', 8);
    renderGrid('cuponsProducts', items, 'asc');
  }catch(e){ renderError('cuponsProducts', 'promocao'); }
}

function copyCode(code){
  navigator.clipboard.writeText(code)
    .then(function(){ showToast('âœ… Cupom "'+code+'" copiado!'); })
    .catch(function(){ showToast('Cupom: '+code); });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVEGAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function goPage(page){
  document.querySelectorAll('.page').forEach(function(p){ p.classList.remove('active'); });
  document.querySelectorAll('nav button').forEach(function(b){ b.classList.remove('active'); });
  document.querySelectorAll('.mobile-nav-btn').forEach(function(b){ b.classList.remove('active'); });
  document.getElementById('page-'+page).classList.add('active');
  var map = {home:0, ofertas:1, 'mais-buscados':2, 'mais-vendidos':3, cupons:4};
  if(map[page] !== undefined){
    document.querySelectorAll('nav button')[map[page]].classList.add('active');
    document.querySelectorAll('.mobile-nav-btn')[map[page]].classList.add('active');
  }
  window.scrollTo({top:0, behavior:'smooth'});
  if(page === 'ofertas')       loadOfertas('smartphone');
  if(page === 'mais-buscados') loadMaisBuscados('iPhone');
  if(page === 'mais-vendidos') loadMaisVendidos('eletronico mais vendido');
  if(page === 'cupons')        loadCupons();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showToast(msg){
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function(){ t.classList.remove('show'); }, 3200);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
window.addEventListener('DOMContentLoaded', function(){
  loadHome();
  document.getElementById('heroSearch').addEventListener('keydown', function(e){
    if(e.key === 'Enter') doSearch(e.target.value);
  });
  document.getElementById('headerSearch').addEventListener('keydown', function(e){
    if(e.key === 'Enter') doSearch(e.target.value);
  });
});
</script>
</body>
</html>







